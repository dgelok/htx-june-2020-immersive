<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    


    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.0.5/redux.min.js"></script>


    <script>
        
        // an action is just an object
        // an action creator is a function that returns an object.
        let addPerson = (id, name, age) =>{

            return {
                type: "ADD",
                personData: {
                    id: id,
                    name: name,
                    age: age
                }
            }
        }

        let removePerson = (id) =>{

            return {
                type: "REMOVE",
                personID: id
            }
        }
        let initialState = {
            persons: []
        }

        // reducer is to update global state with certain actions
        let reducer = (state, action) =>{

            // check to see if global state exists
            if (state == undefined){
                state = initialState
            }

            if (action.type == "ADD") {
                return {
                    ...state,
                    persons: state.persons.concat(action.personData)
                }
            } else if (action.type == "REMOVE") {
                
                return {
                    ...state, 
                    persons: state.person.filter(p => p.id != action.personID)
                }



            }
            else {
                return state
            }
        }


        let store = Redux.createStore(reducer)

        

        let showState = () =>{
            console.log(store.getState())
        }
        store.subscribe(showState) // 
        store.dispatch(addPerson(1,'michael', 21))
        store.dispatch(addPerson(2,'cainan', 21))
        store.dispatch(addPerson(3,'woody', 21))
        store.dispatch(addPerson(4,'micah', 21))
        store.dispatch(addPerson(5,'dan', 21))
        store.dispatch(addPerson(6,'Chris', 21))
        store.dispatch(addPerson(7,'RJ', 21))
        store.dispatch(addPerson(8,'jeremy', 21))
        store.dispatch(removePerson(1))
    </script>
</body>
</html>